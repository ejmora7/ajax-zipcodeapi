<!DOCTYPE html>
<html>
  <head>
    <title>
      AJAX|ZipCodeApi
    </title>
    <meta charset="UTF-8">  
    <style>
      	    html, body {
      	     	height: 100%;
      	    	 margin: 0;
      	    	 padding: 0;
      	   	  box-sizing: border-box;
      	    }
	    label {
	    	display:block;
	    }
      	    input {
       	   	 width: 100px;
       	   	 height: 20px;
      	    }
      	    .inputs {
      	     	 display: inline-block;
      	    	 margin-right: 30px;
      	    }
	    .statewidth {
	    	width: 33px;
	    }
    </style>
  </head>
  <body>
    <h1>
      What is the distance?
    </h1>
    <h4>By entering locations by zip code or city name the distance between the two will be shown.</h4>
    <p>Enter a location by city name.</p>
    <div id="form1">
      <div class="inputs">
        <label for="location1">Location 1</label>
        <input id="location1" type="text" placeholder="san diego">
        <input id="location1State" class="statewidth" type="text" placeholder="ca" maxlength="2">
      </div>
      <div class="inputs">
        <label for="location2">Location 2</label> 
        <input id="location2" type="text" placeholder="new york"> 
        <input id="location2State" class="statewidth" type="text" placeholder="ny" maxlength="2">
      </div>
    </div> 
    <script type="text/javascript">
	    window.onload=()=>{
		    const loc1 = document.getElementById("location1");
		    const loc2 = document.getElementById("location2");
		    const loc1State = document.getElementById("location1State");
		    const loc2State = document.getElementById("location2State");
		    let insertNode = ((refNode,newNode)=>{
			    refNode.appendChild(newNode);
		    });
		    
		    loc1.addEventListener("keyup",(e)=>{  
			    let L1Value = loc1.value;
			    let L1StateValue = loc1State.value; 
			    let L2Value = loc2.value;
			    let L2StateValue = loc2State.value;
			    L1Value.toLowerCase();
			    L1StateValue.toLowerCase();
			    L2Value.toLowerCase();
			    L2StateValue.toLowerCase();
			    
			    if(loc1Value === "" || loc2Value ===""){
				    console.log("they are empty");
			    }
			    
			    let doRequest = ()=>{
				    let xhr = new XMLHttpRequest();
				    
				    //https://www.zipcodeapi.com/rest/DwGe5NqiaZhXNDA7nFb2sdXP1PXx0M7C3jksaatKwuUUbgO9U7ukRivebPsxpAHn/city-zips.json/San Diego/ca
				    let apiurl = "https://www.zipcodeapi.com/rest/DwGe5NqiaZhXNDA7nFb2sdXP1PXx0M7C3jksaatKwuUUbgO9U7ukRivebPsxpAHn/city-zips.";
				    
				    let format = "json"
				    let city1 = L1Value;
				    let state1 = L1StateValue;
				    let endpoint = `${format}/${city1}/${state1}`;
				    let url = apiurl + endpoint; 
				    console.log(url);
				    //xhr.onreadystatechange = "clabackfunction";
				   // xhr.open();
				    //xhr.send();
			    };    
		    });
	    };
    </script>  
  </body>
</html>
